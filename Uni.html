<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾·æ³•åŒåŸè®°ï¼šå†¬æ—¥æ—…è¡ŒåŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Chart Container Styling - Critical for Responsiveness */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Utility Classes */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            border-radius: 1rem;
        }
        
        .timeline-connector {
            position: absolute;
            left: 24px;
            top: 24px;
            bottom: -24px;
            width: 2px;
            background-color: #cbd5e1;
            z-index: 0;
        }
        .last-item .timeline-connector {
            display: none;
        }

        .nav-btn.active {
            color: #2563eb; /* Blue 600 */
            background-color: #eff6ff; /* Blue 50 */
        }

        /* Custom Scrollbar for horizontal tabs */
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }
        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
    <!-- Chosen Palette: Slate (Neutrals) + Blue (Primary/Transit) + Amber (Highlights) + Rose (Alerts) -->
    <!-- Application Structure Plan:
         1. Dashboard (Overview): Quick stats, daylight visualization (critical for winter), and packing/pre-trip checklist.
         2. Itinerary (Timeline): A day-by-day vertical timeline. Each event card highlights time, activity, and specific notes (e.g., student discounts, specific routes).
         3. Reservations (Manager): A checklist of all booked/to-be-booked items identified in the report.
         4. Explore (Collection): A filterable grid of Photo Spots and Food recommendations.
         Rationale: This structure separates the linear "what do I do next" (Itinerary) from the "what do I need to prepare" (Reservations) and "where are the cool spots" (Explore), preventing information overload.
    -->
    <!-- Visualization & Content Choices:
         1. Doughnut Chart: Itinerary Balance (Sightseeing vs Food vs Transit) to show the trip's pace.
         2. Bar Chart: Daylight vs Activity Hours. Since it's Jan, showing short daylight (8:30-16:30) reinforces why morning starts are key.
         3. Interactive Checklists: For packing and reservations.
         4. Tabbed Navigation: For switching days easily.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
</head>
<body class="pb-24 md:pb-0 md:pt-20">

    <!-- Desktop/Top Navigation (Hidden on Mobile) -->
    <nav class="hidden md:flex fixed top-0 w-full bg-white/90 backdrop-blur border-b border-gray-200 z-50 justify-center gap-8 p-4">
        <button onclick="nav('overview')" class="nav-btn px-6 py-2 rounded-full font-bold transition-all hover:bg-gray-100">ğŸ“Š æ¦‚è§ˆ</button>
        <button onclick="nav('itinerary')" class="nav-btn px-6 py-2 rounded-full font-bold transition-all hover:bg-gray-100">ğŸ—“ï¸ è¡Œç¨‹</button>
        <button onclick="nav('reservations')" class="nav-btn px-6 py-2 rounded-full font-bold transition-all hover:bg-gray-100">ğŸŸï¸ é¢„çº¦</button>
        <button onclick="nav('explore')" class="nav-btn px-6 py-2 rounded-full font-bold transition-all hover:bg-gray-100">ğŸ“· åƒå–/å‡ºç‰‡</button>
    </nav>

    <!-- Mobile/Bottom Navigation -->
    <nav class="md:hidden fixed bottom-0 w-full bg-white border-t border-gray-200 z-50 flex justify-around p-3 safe-area-pb">
        <button onclick="nav('overview')" class="nav-btn flex flex-col items-center gap-1 w-full text-gray-500 rounded-lg p-1">
            <span class="text-xl">ğŸ“Š</span>
            <span class="text-[10px] font-medium">æ¦‚è§ˆ</span>
        </button>
        <button onclick="nav('itinerary')" class="nav-btn flex flex-col items-center gap-1 w-full text-gray-500 rounded-lg p-1">
            <span class="text-xl">ğŸ—“ï¸</span>
            <span class="text-[10px] font-medium">è¡Œç¨‹</span>
        </button>
        <button onclick="nav('reservations')" class="nav-btn flex flex-col items-center gap-1 w-full text-gray-500 rounded-lg p-1">
            <span class="text-xl">ğŸŸï¸</span>
            <span class="text-[10px] font-medium">é¢„çº¦</span>
        </button>
        <button onclick="nav('explore')" class="nav-btn flex flex-col items-center gap-1 w-full text-gray-500 rounded-lg p-1">
            <span class="text-xl">ğŸ“·</span>
            <span class="text-[10px] font-medium">å‘ç°</span>
        </button>
    </nav>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto p-4 md:p-6 space-y-6">

        <!-- SECTION: OVERVIEW -->
        <section id="overview" class="view-section animate-fade">
            <header class="mb-6">
                <h1 class="text-2xl font-bold text-slate-800">ğŸ‡ªğŸ‡º å¾·æ³•åŒåŸè®°</h1>
                <p class="text-slate-500 text-sm mt-1">1æœˆ7æ—¥ - 1æœˆ12æ—¥ | æŸæ— Â· å¾·ç´¯æ–¯é¡¿ Â· å·´é»</p>
            </header>

            <!-- Alerts -->
            <div class="glass-card p-4 mb-6 border-l-4 border-amber-400 bg-amber-50/50">
                <h3 class="font-bold text-amber-800 mb-2 flex items-center">âš ï¸ è¡Œå‰é«˜äº®æé†’</h3>
                <ul class="text-sm text-amber-900 space-y-1 list-disc list-inside">
                    <li><b>ä¿æš–ï¼š</b>å¸½å­ã€å›´å·¾ã€æ‰‹å¥—æ˜¯æˆ·å¤–è¡Œèµ°å¿…å¤‡ã€‚</li>
                    <li><b>å‘¨æ—¥é¢„è­¦ï¼š</b>1æœˆ11æ—¥(å‘¨æ—¥) å·´é»å¤šæ•°å•†åº—é—­é—¨ï¼Œåªæœ‰ç›é»‘åŒºè¥ä¸šã€‚</li>
                    <li><b>å­¦ç”Ÿç¦åˆ©ï¼š</b>åŠ¡å¿…æºå¸¦ <b>å­¦ç”Ÿè¯(ISIC) + æŠ¤ç…§</b>ã€‚å¾·å›½é¦†å¤šæœ‰ä¼˜æƒ ï¼Œå·´é»æ¬§ç›Ÿç”Ÿå…¨å…/éæ¬§ç›Ÿç”Ÿéƒ¨åˆ†æœ‰ç¥¨ã€‚</li>
                </ul>
            </div>

            <!-- Visualization Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- Activity Balance Chart -->
                <div class="glass-card p-4">
                    <h3 class="text-sm font-bold text-slate-500 mb-2">è¡Œç¨‹èŠ‚å¥åˆ†å¸ƒ</h3>
                    <div class="chart-container">
                        <canvas id="activityChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-slate-400 mt-2">åŸºäºæ™¯ç‚¹æ•°é‡ç»Ÿè®¡</p>
                </div>

                <!-- Daylight Chart -->
                <div class="glass-card p-4">
                    <h3 class="text-sm font-bold text-slate-500 mb-2">1æœˆå†¬æ—¥ç™½æ˜¼è­¦ç¤º</h3>
                    <div class="chart-container">
                        <canvas id="daylightChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-slate-400 mt-2">16:30å³æ—¥è½ï¼Œæˆ·å¤–æ‹ç…§è¯·èµ¶æ—©ï¼</p>
                </div>
            </div>

            <!-- Packing Checklist -->
            <div class="glass-card p-5">
                <h3 class="font-bold text-slate-800 mb-4">ğŸ§³ å¿…å¤‡æ¸…å•</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3" id="packing-list">
                    <!-- JS populated -->
                </div>
            </div>
        </section>

        <!-- SECTION: ITINERARY -->
        <section id="itinerary" class="view-section hidden">
            <header class="mb-4 sticky top-0 md:top-20 bg-[#f8fafc] pt-2 pb-2 z-40">
                <div class="flex overflow-x-auto gap-2 hide-scroll pb-2" id="day-tabs">
                    <!-- JS populated tabs -->
                </div>
            </header>

            <div id="timeline-container" class="space-y-0">
                <!-- JS populated timeline -->
            </div>
        </section>

        <!-- SECTION: RESERVATIONS -->
        <section id="reservations" class="view-section hidden">
            <div class="glass-card p-6">
                <h2 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                    <span class="bg-rose-100 text-rose-600 p-2 rounded-lg mr-3 text-lg">ğŸŸï¸</span>
                    é¢„çº¦ç®¡ç†ä¸­å¿ƒ
                </h2>
                <p class="text-sm text-slate-500 mb-6">ä»¥ä¸‹é¡¹ç›®å¼ºçƒˆå»ºè®®æˆ–å¿…é¡»æå‰é¢„çº¦ã€‚ç‚¹å‡»å‹¾é€‰ä»¥æ ‡è®°ä¸ºâ€œå·²æå®šâ€ã€‚</p>
                <div class="space-y-3" id="reservation-list">
                    <!-- JS populated -->
                </div>
            </div>
        </section>

        <!-- SECTION: EXPLORE (Photo & Food) -->
        <section id="explore" class="view-section hidden">
            <div class="flex gap-2 mb-6">
                <button onclick="filterExplore('all')" class="explore-filter active px-4 py-1.5 rounded-full text-sm font-medium bg-slate-200 text-slate-600">å…¨éƒ¨</button>
                <button onclick="filterExplore('food')" class="explore-filter px-4 py-1.5 rounded-full text-sm font-medium bg-white border border-slate-200 text-slate-600">ğŸ½ï¸ ç¾é£Ÿ</button>
                <button onclick="filterExplore('photo')" class="explore-filter px-4 py-1.5 rounded-full text-sm font-medium bg-white border border-slate-200 text-slate-600">ğŸ“· å‡ºç‰‡</button>
            </div>

            <div class="grid grid-cols-1 gap-4" id="explore-grid">
                <!-- JS populated -->
            </div>
        </section>

    </main>

    <script>
        // --- DATA ---
        const packingItems = [
            "å­¦ç”Ÿè¯ (ISIC) + æŠ¤ç…§", "è½¬æ¢æ’å¤´ (æ¬§æ ‡)", "å……ç”µå®", "å›´å·¾/æ‰‹å¥—/å¸½å­", 
            "ç‰™åˆ·æ‹–é‹ (æ¬§æ´²é…’åº—å¸¸ä¸æä¾›)", "App: DB Navigator", "App: Citymapper", "App: Uber Eats"
        ];

        const days = [
            { id: 'd1', date: '1æœˆ7æ—¥', w: 'å‘¨ä¸‰', city: 'æŸæ—', title: 'æŠµè¾¾ä¸è´­ç‰©' },
            { id: 'd2', date: '1æœˆ8æ—¥', w: 'å‘¨å››', city: 'å¾·ç´¯æ–¯é¡¿', title: 'ä¸€æ—¥æ¸¸(å—è¿›åŒ—å‡º)' },
            { id: 'd3', date: '1æœˆ9æ—¥', w: 'å‘¨äº”', city: 'æŸæ—/å·´é»', title: 'æ·±åº¦æ¸¸ & é£è¡Œ' },
            { id: 'd4', date: '1æœˆ10æ—¥', w: 'å‘¨å…­', city: 'å·´é»', title: 'é“å¡” & é¦™è¡—' },
            { id: 'd5', date: '1æœˆ11æ—¥', w: 'å‘¨æ—¥', city: 'å·´é»', title: 'å¢æµ®å®« & èœ—ç‰›' },
            { id: 'd6', date: '1æœˆ12æ—¥', w: 'å‘¨ä¸€', city: 'å·´é»', title: 'å·¦å²¸ & è¿”ç¨‹' }
        ];

        const itineraryData = {
            'd1': [
                { time: '13:55', title: 'æŠµè¾¾æŸæ— (BER)', type: 'transit', desc: 'æœºåœºå¿«çº¿ FEX è‡³ Zoologischer Garten' },
                { time: '15:30', title: 'å…¥ä½ Hotel NH Berlin', type: 'hotel', desc: 'ä½äº KurfÃ¼rstendammï¼Œä½ç½®æä½³' },
                { time: '16:00', title: 'Pop Mart & KaDeWe', type: 'shop', desc: 'TauentzienstraÃŸe 13ï¼Œæ­¥è¡Œå¯è¾¾' },
                { time: '18:30', title: 'æ™šé¤: Savignyplatz', type: 'food', desc: 'Dickes Wirtshaus (å¾·é¤) æˆ– Kuchi (æ—¥æ–™)' }
            ],
            'd2': [
                { time: '08:00', title: 'ç«è½¦å‰å¾€ Dresden Hbf', type: 'transit', desc: 'å»ºè®®ä¹°åˆ°å—ç«™(Hbf)ä¸‹è½¦ï¼Œå¼€å¯ä¸€è·¯å‘åŒ—è·¯çº¿', badge: 'å»ºè®®é¢„è®¢' },
                { time: '10:30', title: 'ç»¿ç©¹çå®é¦† & ç‹å®«', type: 'sight', desc: 'ğŸ“å­¦ç”Ÿä¼˜æƒ ã€‚å…ˆçœ‹åœ°ä¸‹å†å²é¦†(éœ€é¢„çº¦)ï¼Œå†çœ‹äºŒæ¥¼æ–°é¦†ã€‚è®°å¾—ç™»è§‚æ™¯å°ã€‚', badge: 'å¿…çœ‹' },
                { time: '13:30', title: 'èŒ¨æ¸©æ ¼å®« & å·§å…‹åŠ›å†°æ£', type: 'food', desc: 'Camondas å·§å…‹åŠ›å†°æ£å¿…åƒï¼' },
                { time: '14:30', title: 'ç‹å­è¡Œåˆ— & åœ£æ¯æ•™å ‚', type: 'sight', desc: 'è¿™é‡Œä¹°å†°ç®±è´´ä¾¿å®œ' },
                { time: '15:00', title: 'åˆé¤: çŒªè‚˜', type: 'food', desc: 'Augustiner (æ•™å ‚é—¨å£)ï¼Œçš®è„†è‚‰å«©' },
                { time: '16:30', title: 'å¸ƒå•å°”å¹³å° & è¿‡æ²³', type: 'sight', desc: 'è¿‡ AugustusbrÃ¼cke æ¡¥ï¼Œå»æ–°åŸ' },
                { time: '19:30', title: 'åŒ—ç«™ (Neustadt) è¿”ç¨‹', type: 'transit', desc: 'ä¸èµ°å›å¤´è·¯ï¼Œç›´æ¥ä»åŒ—ç«™å›æŸæ—' }
            ],
            'd3': [
                { time: '09:00', title: 'é€€æˆ¿ & å­˜è¡Œæ', type: 'transit', desc: 'å»ºè®®å­˜åœ¨ Hbf è½¦ç«™æˆ– Mall of Berlin' },
                { time: '10:00', title: 'å“ˆå…‹åº­é™¢ & åšç‰©é¦†å²›', type: 'sight', desc: 'James Simon Gallery æ‹æç®€å¤§ç‰‡ã€‚ğŸ“å­¦ç”Ÿä¼˜æƒ ' },
                { time: '12:30', title: 'HARIBO æ——èˆ°åº— & åˆé¤', type: 'shop', desc: 'Mall of Berlin è§£å†³åˆé¤å’Œè´­ç‰©' },
                { time: '14:30', title: 'å¥¥ä¼¯é²å§†æ¡¥', type: 'sight', desc: 'æ‹é»„è‰²åœ°é“ç©¿è¿‡çº¢ç –æ¡¥' },
                { time: '17:00', title: 'å‰å¾€æœºåœº (BER)', type: 'transit', desc: 'é¢„ç•™å……è¶³å®‰æ£€æ—¶é—´' },
                { time: '20:20', title: 'é£å¾€å·´é» (ORY)', type: 'transit', desc: 'æŠµè¾¾å¥¥åˆ©æœºåœºã€‚æ‰“è½¦å»15åŒºä¸€å£ä»· â‚¬36 (Taxi Parisien)' },
                { time: '23:30', title: 'å¤–å–: Napoli Gang', type: 'food', desc: 'Uber Eats ç‚¹ Pink Mamma åŒæ¬¾æ„é¢' }
            ],
            'd4': [
                { time: '10:30', title: 'ç¡æ‡’è§‰ & å‡ºé—¨', type: 'chill', desc: 'æ˜¨æ™šå¤ªæ™šï¼Œä»Šæ—©æ¢å¤ä½“åŠ›' },
                { time: '11:30', title: 'åˆé¤: æ³•å¼å°é¦†', type: 'food', desc: 'CafÃ© Constant æˆ– Les Cocottes (é“å¡”é™„è¿‘)' },
                { time: '13:00', title: 'åŸƒè²å°”é“å¡”', type: 'sight', desc: 'TrocadÃ©ro æ‹å…¨æ™¯ -> CamoÃ«ns æ‹éšç§˜æœºä½ã€‚ğŸ“é’å¹´ç¥¨ä¼˜æƒ ' },
                { time: '15:30', title: 'é¦™æ¦­ä¸½èˆ & å‡¯æ—‹é—¨', type: 'shop', desc: 'æ¨èé€› Galeries Lafayette æ–°åº— & 86Champs' },
                { time: '18:00', title: 'å¡çº³æ²³æ¸¸èˆ¹', type: 'sight', desc: 'æ—¥è½/å¤œæ™¯æ—¶æ®µæœ€ä½³' },
                { time: '20:30', title: 'æ™šé¤: ç‰›æ’è–¯æ¡', type: 'food', desc: 'Le Relais de l\'EntrecÃ´te (éœ€æ’é˜Ÿ)' }
            ],
            'd5': [
                { time: '09:30', title: 'å¢æµ®å®«', type: 'sight', desc: 'ğŸ“ä»…æ¬§ç›Ÿ<26å²å…ã€‚èµ°åœ°ä¸‹Carrouselå…¥å£é¿æ’é˜Ÿ', badge: 'å¿…çº¦' },
                { time: '12:30', title: 'åˆé¤: ç™¾å¹´èœ—ç‰›è€åº—', type: 'food', desc: 'L\'Escargot Montorgueilï¼Œé‡‘å­—æ‹›ç‰Œ' },
                { time: '15:00', title: 'è’™é©¬ç‰¹é«˜åœ°', type: 'sight', desc: 'é¿å¼€äººç¾¤ï¼šVilla LÃ©andre & Maison Rose' },
                { time: '19:00', title: 'æ™šé¤: Pink Mamma', type: 'food', desc: 'ç½‘çº¢æ„é¤ï¼Œå¿…é¡»æå‰æŠ¢å·é¢„çº¦', badge: 'éš¾è®¢' }
            ],
            'd6': [
                { time: '10:00', title: 'Le Bon MarchÃ©', type: 'shop', desc: 'å·¦å²¸æœ€é¡¶çº§ç™¾è´§ï¼Œäººå°‘å¥½é€›ã€‚å¿…å»é£Ÿå“é¦†ä¹°ä¼´æ‰‹ç¤¼' },
                { time: '13:00', title: 'åˆé¤: Fallafel', type: 'food', desc: 'L\'As du Fallafel (ç›é»‘åŒº) ä»Šæ—¥è¥ä¸š' },
                { time: '14:00', title: 'èŠ±ç¥å’–å•¡ & å¢æ£®å ¡å…¬å›­', type: 'chill', desc: 'æ„Ÿå—å·¦å²¸æ°›å›´' },
                { time: '16:00', title: 'Citypharma è¯å¦†', type: 'shop', desc: 'æœ€åè¡¥è´§ (å‘¨ä¸€è¥ä¸š)' },
                { time: '17:30', title: 'å‰å¾€æœºåœº (CDG)', type: 'transit', desc: 'RER Bçº¿å‰å¾€ï¼Œé¢„ç•™æ—¶é—´' }
            ]
        };

        const reservations = [
            { title: 'æŸæ—-å¾·ç´¯æ–¯é¡¿ ç«è½¦', date: '1æœˆ8æ—¥', icon: 'ğŸš„' },
            { title: 'ç»¿ç©¹çå®é¦† (å†å²é¦†)', date: '1æœˆ8æ—¥ 11:00', icon: 'ğŸ’', urgent: true },
            { title: 'æŸæ—-å·´é» æœºç¥¨', date: '1æœˆ9æ—¥ 20:20', icon: 'âœˆï¸' },
            { title: 'åŸƒè²å°”é“å¡”ç™»é¡¶', date: '1æœˆ10æ—¥', icon: 'ğŸ—¼' },
            { title: 'å¢æµ®å®«é—¨ç¥¨', date: '1æœˆ11æ—¥ 09:30', icon: 'ğŸ–¼ï¸', urgent: true },
            { title: 'Pink Mamma æ™šé¤', date: '1æœˆ11æ—¥ 19:00', icon: 'ğŸ', urgent: true }
        ];

        const exploreItems = [
            { type: 'food', name: 'L\'Escargot Montorgueil', city: 'å·´é»', desc: 'ç™¾å¹´é‡‘èœ—ç‰›ï¼Œå¿…åƒç»å…¸', tags: ['èœ—ç‰›', 'è€åº—'] },
            { type: 'food', name: 'Napoli Gang', city: 'å·´é»', desc: 'Pink MammaåŒæ¬¾å¤–å–', tags: ['å¤–å–', 'UberEats'] },
            { type: 'food', name: 'Camondas', city: 'å¾·ç´¯æ–¯é¡¿', desc: 'ç‹å®«é—¨å£å·§å…‹åŠ›å†°æ£', tags: ['ç”œç‚¹'] },
            { type: 'photo', name: 'James Simon Gallery', city: 'æŸæ—', desc: 'ç™½è‰²æç®€æŸ±å»Šï¼Œå…‰å½±äººåƒ', tags: ['å»ºç­‘', 'åšç‰©é¦†å²›'] },
            { type: 'photo', name: 'OberbaumbrÃ¼cke', city: 'æŸæ—', desc: 'çº¢ç –æ¡¥+é»„è‰²åœ°é“åŒæ¡†', tags: ['ç»å…¸'] },
            { type: 'photo', name: 'Avenue de CamoÃ«ns', city: 'å·´é»', desc: 'é“å¡”éšç§˜æœºä½ï¼Œæ— äººä¸”ç¾', tags: ['å°ä¼—'] },
            { type: 'photo', name: 'Galeries Lafayette', city: 'å·´é»', desc: 'é¦™è¡—æ–°åº—ï¼Œå…‰å½±éš§é“', tags: ['æ—¶å°š'] }
        ];

        // --- APP LOGIC ---
        let activeDay = 'd1';

        function init() {
            renderPackingList();
            renderDayTabs();
            renderTimeline(activeDay);
            renderReservations();
            renderExplore('all');
            initCharts();
            
            // Set default active tab style
            nav('overview');
        }

        function nav(sectionId) {
            // Toggle visibility
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Toggle button styles
            document.querySelectorAll('.nav-btn').forEach(el => {
                el.classList.remove('text-blue-600', 'bg-blue-50');
                if(el.getAttribute('onclick').includes(sectionId)) {
                    el.classList.add('text-blue-600', 'bg-blue-50'); // Mobile & Desktop active state logic roughly
                }
            });
            window.scrollTo(0,0);
        }

        function renderPackingList() {
            const list = document.getElementById('packing-list');
            list.innerHTML = packingItems.map(item => `
                <div class="flex items-center space-x-2 text-sm text-slate-700">
                    <input type="checkbox" class="w-4 h-4 rounded text-blue-600 focus:ring-blue-500 border-gray-300">
                    <span>${item}</span>
                </div>
            `).join('');
        }

        function renderDayTabs() {
            const container = document.getElementById('day-tabs');
            container.innerHTML = days.map(d => `
                <button onclick="switchDay('${d.id}')" 
                    class="day-tab px-4 py-2 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${activeDay === d.id ? 'bg-slate-800 text-white border-slate-800 shadow-md' : 'bg-white text-slate-600 border-slate-200 hover:bg-gray-50'}">
                    ${d.date} ${d.w}
                </button>
            `).join('');
        }

        function switchDay(id) {
            activeDay = id;
            renderDayTabs();
            renderTimeline(id);
        }

        function renderTimeline(id) {
            const container = document.getElementById('timeline-container');
            const items = itineraryData[id];
            const dayInfo = days.find(d => d.id === id);

            let html = `
                <div class="px-2 mb-4">
                    <h2 class="text-xl font-bold text-slate-800">${dayInfo.city} <span class="text-base font-normal text-slate-500">| ${dayInfo.title}</span></h2>
                </div>
            `;

            html += items.map((item, index) => {
                const isLast = index === items.length - 1;
                let icon = 'ğŸ“';
                let color = 'bg-slate-100 text-slate-600';
                if(item.type === 'food') { icon = 'ğŸ´'; color = 'bg-orange-100 text-orange-600'; }
                if(item.type === 'transit') { icon = 'ğŸš„'; color = 'bg-blue-100 text-blue-600'; }
                if(item.type === 'shop') { icon = 'ğŸ›ï¸'; color = 'bg-pink-100 text-pink-600'; }
                if(item.type === 'chill') { icon = 'â˜•'; color = 'bg-teal-100 text-teal-600'; }

                return `
                <div class="relative pl-20 py-2 ${isLast ? 'last-item' : ''}">
                    <div class="absolute left-6 top-3 font-mono text-sm font-bold text-slate-400 w-12 text-right">${item.time}</div>
                    <div class="timeline-connector"></div>
                    <div class="absolute left-[24px] top-[24px] -ml-[12px] w-6 h-6 rounded-full border-2 border-white shadow-sm flex items-center justify-center text-xs z-10 ${color}">
                        ${icon}
                    </div>
                    <div class="glass-card p-4 ml-4 hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-slate-800 text-lg">${item.title}</h3>
                            ${item.badge ? `<span class="bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full font-bold whitespace-nowrap">${item.badge}</span>` : ''}
                        </div>
                        <p class="text-sm text-slate-600 mt-1">${item.desc}</p>
                    </div>
                </div>
                `;
            }).join('');
            container.innerHTML = html;
        }

        function renderReservations() {
            const list = document.getElementById('reservation-list');
            list.innerHTML = reservations.map((res, i) => `
                <label class="flex items-start p-3 bg-white border border-gray-100 rounded-xl shadow-sm cursor-pointer hover:bg-gray-50 transition-colors">
                    <input type="checkbox" class="mt-1 w-5 h-5 rounded text-blue-600 border-gray-300 focus:ring-blue-500">
                    <div class="ml-3 flex-1">
                        <div class="flex justify-between">
                            <span class="font-bold text-slate-800">${res.icon} ${res.title}</span>
                            ${res.urgent ? '<span class="text-xs bg-rose-100 text-rose-600 px-2 py-0.5 rounded font-bold">å¿…æŠ¢</span>' : ''}
                        </div>
                        <p class="text-xs text-slate-500 mt-0.5">${res.date}</p>
                    </div>
                </label>
            `).join('');
        }

        function filterExplore(type) {
            document.querySelectorAll('.explore-filter').forEach(el => {
                el.classList.remove('active', 'bg-slate-200');
                el.classList.add('bg-white', 'border', 'border-slate-200');
            });
            event.target.classList.add('active', 'bg-slate-200');
            event.target.classList.remove('bg-white', 'border');
            renderExplore(type);
        }

        function renderExplore(filter) {
            const grid = document.getElementById('explore-grid');
            const items = exploreItems.filter(i => filter === 'all' || i.type === filter);
            
            grid.innerHTML = items.map(item => `
                <div class="glass-card p-4 flex gap-4 items-start">
                    <div class="text-2xl">${item.type === 'food' ? 'ğŸ½ï¸' : 'ğŸ“·'}</div>
                    <div>
                        <h4 class="font-bold text-slate-800">${item.name}</h4>
                        <div class="flex gap-2 my-1">
                            <span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded">${item.city}</span>
                            ${item.tags.map(t => `<span class="text-[10px] bg-blue-50 text-blue-500 px-1.5 py-0.5 rounded">#${t}</span>`).join('')}
                        </div>
                        <p class="text-sm text-slate-600">${item.desc}</p>
                    </div>
                </div>
            `).join('');
        }

        // --- CHARTS ---
        function initCharts() {
            // 1. Activity Balance Doughnut
            const ctx1 = document.getElementById('activityChart').getContext('2d');
            new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['è§‚å…‰', 'ç¾é£Ÿ', 'äº¤é€š', 'è´­ç‰©'],
                    datasets: [{
                        data: [45, 25, 20, 10], // Approx percentages
                        backgroundColor: ['#6366f1', '#f97316', '#3b82f6', '#ec4899'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12, font: { size: 10 } } }
                    }
                }
            });

            // 2. Daylight Bar Chart
            const ctx2 = document.getElementById('daylightChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['08:00', '10:00', '12:00', '14:00', '16:00', '18:00', '20:00'],
                    datasets: [{
                        label: '1æœˆç™½æ˜¼å¯è§åº¦',
                        data: [20, 100, 100, 100, 40, 0, 0], 
                        backgroundColor: (ctx) => {
                            const val = ctx.raw;
                            return val > 50 ? '#f59e0b' : '#1e293b'; // Amber for day, Slate for night
                        },
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { display: false, max: 120 },
                        x: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // Start
        init();
    </script>
</body>
</html>
<Script type = "module" src="/index.tsx"></script>
